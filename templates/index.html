<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Emoji Puzzle Game</title>
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Emoji Puzzle">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1a73e8">
    
    <!-- Link to manifest -->
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    
    <!-- Apple Touch Icon (create a 180x180 PNG with an emoji or icon) -->
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    
    <!-- Your existing CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Add the mobile CSS from the previous artifact -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mobile.css') }}">
    
    <!-- Prevent zooming on input focus -->
    <style>
        input, select, textarea {
            font-size: 16px !important;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header class="game-header">
            <h1>Emoji Phrase Rebus</h1>
            <div class="score-board">
                Score: <span id="score-display">0</span>
            </div>
        </header>

        <!-- FIXED: Progress Timeline Component with "Start" instead of "New Puzzle" -->
        <div class="progress-timeline">
            <div class="step current" data-step="1">Start</div>
            <div class="step upcoming" data-step="2">1st Letter</div>
            <div class="step upcoming" data-step="3">2nd Letter</div>
            <div class="step upcoming" data-step="4">3rd Letter</div>
            <div class="step upcoming" data-step="5">1st Word</div>
            <div class="step upcoming" data-step="6">2nd Word</div>
            <div class="step upcoming" data-step="7">3rd Word</div>
            <div class="step upcoming" data-step="8">Answer</div>
        </div>

        <!-- UPDATED: Step Status Panel -->
        <div class="step-status-panel playing">
            <div class="current-step">
                <strong>Current:</strong> <span id="current-step-name">Start</span>
            </div>
            <div class="next-step">
                <strong>Next:</strong> <span id="next-step-name">1st Letter Hint</span>
            </div>
            <div class="points-available">
                <strong>Points Available:</strong> <span id="points-available">100</span>
            </div>
        </div>

        <div class="puzzle-area">
            <div id="emoji-display" class="emoji-puzzle-display">
                Loading emojis...
            </div>
            <div id="category-display" class="category-display">
                Category: <span id="category-text">Loading...</span>
            </div>
            <div id="phrase-display" class="phrase-display">
            </div>
        </div>

        <div class="interaction-area">
            <div class="guess-section">
                <input type="text" id="guess-input" placeholder="Enter your guess here" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                <button id="submit-guess-button">Submit Guess</button>
            </div>
            
            <!-- UPDATED: Progression Controls with moved New Puzzle button -->
            <div class="progression-controls">
                <button id="next-hint-button" class="primary-button">Next Hint</button>
                <button id="skip-to-answer-button" class="secondary-button">Skip to Answer</button>
                <button id="pause-resume-button" class="tertiary-button">Pause Game</button>
                <!-- MOVED: New Puzzle button moved up for better visibility -->
                <button id="new-puzzle-button" class="new-puzzle-button-inline">New Puzzle</button>
            </div>
            
            <!-- OLD: Keep temporarily for transition (will be removed later) -->
            <div class="hint-controls" style="display: none;">
                <button id="pause-resume-hints-button">Pause Game</button>
                <button id="letter-hint-button">ðŸ’¡ Letter Hint</button>
                <div>Time to next hint: <span id="hint-timer-display">--</span>s</div>
                <div>Letter hints used: <span id="letter-hints-used-display">0</span>/3</div>
            </div>
            <div class="hint-info" style="display: none;">
                <small>Letter hints cost 5 points each</small>
            </div>
            
            <!-- NEW: Final Answer Timer Display -->
            <div id="final-answer-timer" class="final-answer-timer" style="display: none;">
                <div class="timer-message">
                    <strong>Final Answer Required!</strong>
                </div>
                <div class="timer-countdown">
                    Time remaining: <span id="final-timer-display">10</span> seconds
                </div>
            </div>
            
            <div id="message-display" class="message-display">
            </div>
        </div>

        <!-- REMOVED: Old New Puzzle button location -->
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>